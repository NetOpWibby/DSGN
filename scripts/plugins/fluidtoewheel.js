// Fluidbox 1.4.3
// Terry Mun (http://terrymun.com)

// jQuery debounced resize event
!function(n,r){var t=function(n,r,t){var e;return function(){function i(){t||n.apply(u,a),e=null}var u=this,a=arguments;e?clearTimeout(e):t&&n.apply(u,a),e=setTimeout(i,r||100)}};jQuery.fn[r]=function(n){return n?this.bind("resize",t(n)):this.trigger(r)}}(jQuery,"smartresize");

// CSS animation callback
function whichTransitionEvent(){var n,i=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in t)if(void 0!==i.style[n])return t[n]}var customTransitionEnd=whichTransitionEvent();

// Plugin
!function(t){var e=0;t.fn.fluidbox=function(i){var a=t.extend(!0,{viewportFill:.95,debounceResize:!0,stackIndex:1e3,stackIndexDelta:10,closeTrigger:[{selector:".fluidbox-overlay",event:"click"},{selector:"document",event:"keyup",keyCode:27}],immediateOpen:!1,loadingEle:!0},i),d=["keyup","keydown","keypress"];a.stackIndex<a.stackIndexDelta&&(a.stackIndexDelta=a.stackIndex),$fbOverlay=t("<div/>",{"class":"fluidbox-overlay",css:{"z-index":a.stackIndex}});var o,n=this,s=t(window),l=function(e){t(e+".fluidbox-opened").trigger("click")},r=function(e,i){var d=e.find("img").first(),n=e.find(".fluidbox-ghost"),l=e.find(".fluidbox-loader"),r=e.find(".fluidbox-wrap"),c=e.data(),f=0,g=0;d.data().imgRatio=c.natWidth/c.natHeight,o>d.data().imgRatio?(f=c.natHeight<s.height()*a.viewportFill?c.natHeight:s.height()*a.viewportFill,c.imgScale=f/d.height(),c.imgScaleY=c.imgScale,c.imgScaleX=c.natWidth*(d.height()*c.imgScaleY/c.natHeight)/d.width()):(g=c.natWidth<s.width()*a.viewportFill?c.natWidth:s.width()*a.viewportFill,c.imgScale=g/d.width(),c.imgScaleX=c.imgScale,c.imgScaleY=c.natHeight*(d.width()*c.imgScaleX/c.natWidth)/d.height());var h=s.scrollTop()-d.offset().top+.5*d.data("imgHeight")*(d.data("imgScale")-1)+.5*(s.height()-d.data("imgHeight")*d.data("imgScale")),u=.5*d.data("imgWidth")*(d.data("imgScale")-1)+.5*(s.width()-d.data("imgWidth")*d.data("imgScale"))-d.offset().left,p=parseInt(1e3*c.imgScaleX)/1e3+","+parseInt(1e3*c.imgScaleY)/1e3;n.add(l).css({transform:"translate("+parseInt(10*u)/10+"px,"+parseInt(10*h)/10+"px) scale("+p+")",top:d.offset().top-r.offset().top,left:d.offset().left-r.offset().left}),n.one(customTransitionEnd,function(){t.each(i,function(t,i){e.trigger(i)})})},c=function(t){function e(){r.imgWidth=i.width(),r.imgHeight=i.height(),r.imgRatio=i.width()/i.height(),d.add(n).css({width:i.width(),height:i.height(),top:i.offset().top-l.offset().top+parseInt(i.css("borderTopWidth"))+parseInt(i.css("paddingTop")),left:i.offset().left-l.offset().left+parseInt(i.css("borderLeftWidth"))+parseInt(i.css("paddingLeft"))}),r.imgScale=o>r.imgRatio?s.height()*a.viewportFill/i.height():s.width()*a.viewportFill/i.width()}if(o=s.width()/s.height(),t.hasClass("fluidbox")){var i=t.find("img").first(),d=t.find(".fluidbox-ghost"),n=t.find(".fluidbox-loader"),l=t.find(".fluidbox-wrap"),r=i.data();e(),i.load(e)}},f=function(e){if(t(this).hasClass("fluidbox")){var i=t(this),d=t(this).find("img").first(),o=t(this).find(".fluidbox-ghost"),n=t(this).find(".fluidbox-loader"),s=t(this).find(".fluidbox-wrap"),l=encodeURI(i.attr("href")),c={},f=function(){i.trigger("openstart"),i.append($fbOverlay).data("fluidbox-state",1).removeClass("fluidbox-closed").addClass("fluidbox-opened"),c.close&&window.clearTimeout(c.close),c.open=window.setTimeout(function(){t(".fluidbox-overlay").css({opacity:1})},10),t(".fluidbox-wrap").css({zIndex:a.stackIndex-a.stackIndexDelta-1}),s.css({"z-index":a.stackIndex+a.stackIndexDelta}),t(".nav-wrapper").css("opacity","0")},g=function(){i.trigger("closestart"),i.data("fluidbox-state",0).removeClass("fluidbox-opened fluidbox-loaded fluidbox-loading").addClass("fluidbox-closed"),c.open&&window.clearTimeout(c.open),c.close=window.setTimeout(function(){t(".fluidbox-overlay").remove(),s.css({"z-index":a.stackIndex-a.stackIndexDelta})},10),t(".fluidbox-overlay").css({opacity:0}),o.add(n).css({transform:"translate(0,0) scale(1,1)",opacity:0,top:d.offset().top-s.offset().top+parseInt(d.css("borderTopWidth"))+parseInt(d.css("paddingTop")),left:d.offset().left-s.offset().left+parseInt(d.css("borderLeftWidth"))+parseInt(d.css("paddingLeft"))}),o.one(customTransitionEnd,function(){i.trigger("closeend")}),d.css({opacity:1}),t(".nav-wrapper").css("opacity","1")};0!==t(this).data("fluidbox-state")&&t(this).data("fluidbox-state")?g():(i.addClass("fluidbox-loading"),d.css({opacity:0}),o.css({"background-image":"url("+d.attr("src")+")",opacity:1}),a.immediateOpen?(i.data("natWidth",d[0].naturalWidth).data("natHeight",d[0].naturalHeight),f(),r(i,["openend"]),t("<img/>",{src:l}).load(function(){i.trigger("imageloaddone").trigger("delayedloaddone").removeClass("fluidbox-loading").addClass("fluidbox-loaded").data("natWidth",t(this)[0].naturalWidth).data("natHeight",t(this)[0].naturalHeight),o.css({"background-image":"url("+l+")"}),r(i,["delayedreposdone"])}).error(function(){i.trigger("imageloadfail"),g()})):t("<img/>",{src:l}).load(function(){i.trigger("imageloaddone").removeClass("fluidbox-loading").addClass("fluidbox-loaded").data("natWidth",t(this)[0].naturalWidth).data("natHeight",t(this)[0].naturalHeight),o.css({"background-image":"url("+l+")"}),f(),r(i,["openend"])}).error(function(){i.trigger("imageloadfail"),g()})),e.preventDefault()}},g=function(e){e?c(e):n.each(function(){c(t(this))});var i=t("a.fluidbox.fluidbox-opened");i.length>0&&r(i,["resizeend"])};return a.debounceResize?t(window).smartresize(function(){g()}):t(window).resize(function(){g()}),n.each(function(){if(t(this).is("a")&&1===t(this).children().length&&t(this).children().is("img")&&"none"!==t(this).css("display")&&"none"!==t(this).parents().css("display")){var i=t("<div/>",{"class":"fluidbox-wrap",css:{"z-index":a.stackIndex-a.stackIndexDelta}}),o=t("<div/>",{"class":"fluidbox-loader"});e+=1;var n=t(this);n.addClass("fluidbox fluidbox-closed").attr("id","fluidbox-"+e).wrapInner(i).find("img").first().css({opacity:1}).after('<div class="fluidbox-ghost"/>').each(function(){var e=t(this);e.width()>0&&e.height()>0?(c(n),n.click(f)):e.load(function(){c(n),n.click(f),n.trigger("thumbloaddone")}).error(function(){n.trigger("thumbloadfail")})}),a.loadingEle&&n.find(".fluidbox-ghost").after(o),t(this).on("recompute",function(){g(t(this)),t(this).trigger("recomputeend")});var r="#fluidbox-"+e;a.closeTrigger&&t.each(a.closeTrigger,function(e){var i=a.closeTrigger[e];"window"!=i.selector?"document"==i.selector&&(i.keyCode&&d.indexOf(i.event)>-1?t(document).on(i.event,function(t){t.keyCode==i.keyCode&&l(r)}):t(document).on(i.event,r,function(){l(r)})):s.on(i.event,function(){l(r)})})}}),n}}(jQuery);



// Toe.js 3.0.6
// Damien Antipa (https://github.com/dantipa/toe.js)

!function(t,n){function e(n,e,o,i){t.each(c,function(t,a){a[n].call(this,e,o,i)})}function o(t){var n=u.Event(t);r=u.State(n),e("touchstart",t,r,n)}function i(t){if(r){var n=u.Event(t);r.move.push(n),e("touchmove",t,r,n)}}function a(t){var n=u.Event(t);r.end=n,e("touchend",t,r,n)}var r,c={},u={active:!1,on:function(){t(document).on("touchstart MSPointerDown pointerdown",o).on("touchmove MSPointerMove MSPointerHover pointermove",i).on("touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",a),u.active=!0},off:function(){t(document).off("touchstart MSPointerDown pointerdown",o).off("touchmove MSPointerMove MSPointerHover pointermove",i).off("touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",a),u.active=!1},track:function(t,n){c[t]=n},addEventParam:function(n,e){var o=t(n.target),i=o.offset(),a={pageX:n.point[0].x,pageY:n.point[0].y,offsetX:i.left-n.point[0].x,offsetY:i.top-n.point[0].y};return t.extend(a,e)},Event:function(n){var e={type:n.type,timestamp:(new Date).getTime(),target:n.target,point:[]},o=[];return n.type.indexOf("touch")>-1?o=n.changedTouches||n.originalEvent.changedTouches||n.touches||n.originalEvent.touches:n.type.match(/.*?pointer.*?/i)&&(o=[n.originalEvent]),t.each(o,function(t,n){e.point.push({x:n.pageX,y:n.pageY})}),e},State:function(t){t.point[0];return{start:t,move:[],end:null}},calc:{getDuration:function(t,n){return n.timestamp-t.timestamp},getDistance:function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},getAngle:function(t,n){return 180*Math.atan2(n.y-t.y,n.x-t.x)/Math.PI},getDirection:function(t){return-45>t&&t>-135?"up":t>=-45&&45>=t?"right":t>=45&&135>t?"down":t>=135||-135>=t?"left":"unknown"},getScale:function(t,n){var e=t.point,o=n.point;return 2===e.length&&2===o.length?(Math.sqrt(Math.pow(o[0].x-o[1].x,2)+Math.pow(o[0].y-o[1].y,2))/Math.sqrt(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2))).toFixed(2):0},getRotation:function(t,n){var e=t.point,o=n.point;return 2===e.length&&2===o.length?(180*Math.atan2(o[0].y-o[1].y,o[0].x-o[1].x)/Math.PI-180*Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x)/Math.PI).toFixed(2):0}}};u.on(),t.toe=u}(jQuery,this);

// Swipe
!function(t,n){var i="swipe",e={distance:100,duration:1200,direction:"all"};n.track(i,{touchstart:function(t,n,e){n[i]={finger:e.point.length}},touchmove:function(t,n,e){n[i].finger=e.point.length>n[i].finger?e.point.length:n[i].finger},touchend:function(a,r,c){var o,g,d=t.extend(e,a.data);o=n.calc.getDuration(r.start,c),g=n.calc.getDistance(r.start.point[0],c.point[0]),o<d.duration&&g>d.distance&&(r[i].angle=n.calc.getAngle(r.start.point[0],c.point[0]),r[i].direction=n.calc.getDirection(r[i].angle),r[i].distance=g,("all"===d.direction||r[i].direction===d.direction)&&t(a.target).trigger(t.Event(i,n.addEventParam(r.start,r[i]))))}})}(jQuery,jQuery.toe,this);

// Tap
!function(t,n){var e=document.documentElement.clientWidth,i=document.documentElement.clientHeight,r=Math.sqrt(e*i),a=.02*r,c="tap",o={distance:a,duration:300,finger:1};n.track(c,{touchstart:function(t,n,e){n[c]={finger:e.point.length}},touchmove:function(t,n,e){n[c].finger=e.point.length>n[c].finger?e.point.length:n[c].finger},touchend:function(e,i,r){var a,g,u=t.extend(o,e.data);a=n.calc.getDuration(i.start,r),g=n.calc.getDistance(i.start.point[0],r.point[0]),a<u.duration&&g<u.distance&&i[c].finger===u.finger&&t(e.target).trigger(t.Event(c,n.addEventParam(i.start,i[c])))}})}(jQuery,jQuery.toe,this);

// Tap/Hold
!function(t,n){var e,i,a="taphold",r={distance:20,duration:500,finger:1};n.track(a,{touchstart:function(o,c,u){var g=t.extend(r,o.data);i=!1,c[a]={finger:u.point.length},clearTimeout(e),e=setTimeout(function(){!i&&n.active&&c[a].finger===g.finger&&t(o.target).trigger(t.Event(a,n.addEventParam(u,c[a])))},g.duration)},touchmove:function(e,o,c){var u,g=t.extend(r,e.data);o[a].finger=c.point.length>o[a].finger?c.point.length:o[a].finger,u=n.calc.getDistance(o.start.point[0],c.point[0]),u>g.distance&&(i=!0)},touchend:function(){i=!0,clearTimeout(e)}})}(jQuery,jQuery.toe,this);

// Transform
!function(t,e){var a,n="transform",r={scale:.1,rotation:15};e.track(n,{touchstart:function(t,e,r){a=!1,e[n]={start:r,move:[]}},touchmove:function(o,c,s){var i=t.extend(r,o.data);2===s.point.length&&(c[n].move.push(s),2!==c[n].start.point.length&&2===s.point.length&&(c[n].start=t.extend({},s)),c[n].rotation=e.calc.getRotation(c[n].start,s),c[n].scale=e.calc.getScale(c[n].start,s),(Math.abs(1-c[n].scale)>i.scale||Math.abs(c[n].rotation)>i.rotation)&&(a||(t(o.target).trigger(t.Event("transformstart",c[n])),a=!0),t(o.target).trigger(t.Event("transform",c[n]))))},touchend:function(r,o,c){a&&(a=!1,2!==c.point.length&&(o.end=t.extend({},o[n].move[o[n].move.length-1])),o[n].rotation=e.calc.getRotation(o[n].start,o.end),o[n].scale=e.calc.getScale(o[n].start,o.end),t(r.target).trigger(t.Event("transformend",o[n])))}})}(jQuery,jQuery.toe,this);



// Mousewheel.js 3.1.6
// Brandon Aaron (http://brandon.aaron.sh)
// MIT licensed

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i=t||window.event,s=a.call(arguments,1),u=0,h=0,r=0,d=0;return t=e.event.fix(i),t.type="mousewheel","detail"in i&&(r=-1*i.detail),"wheelDelta"in i&&(r=i.wheelDelta),"wheelDeltaY"in i&&(r=i.wheelDeltaY),"wheelDeltaX"in i&&(h=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(h=-1*r,r=0),u=0===r?h:r,"deltaY"in i&&(r=-1*i.deltaY,u=r),"deltaX"in i&&(h=i.deltaX,0===r&&(u=-1*h)),0!==r||0!==h?(d=Math.max(Math.abs(r),Math.abs(h)),(!l||l>d)&&(l=d),u=Math[u>=1?"floor":"ceil"](u/l),h=Math[h>=1?"floor":"ceil"](h/l),r=Math[r>=1?"floor":"ceil"](r/l),t.deltaX=h,t.deltaY=r,t.deltaFactor=l,s.unshift(t,u,h,r),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)):void 0}function n(){l=null}var o,l,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(e.event.fixHooks)for(var u=i.length;u;)e.event.fixHooks[i[--u]]=e.event.mouseHooks;e.event.special.mousewheel={version:"3.1.6",setup:function(){if(this.addEventListener)for(var e=s.length;e;)this.addEventListener(s[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});